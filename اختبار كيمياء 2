<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>Ø§Ø®ØªØ¨Ø§Ø± Ø§Ù„ÙƒÙŠÙ…ÙŠØ§Ø¡ â€” 50 Ø³Ø¤Ø§Ù„</title>
<style>
  body { font-family: "Tahoma", Arial, sans-serif; background:#f3f6fb; color:#111; margin:0; padding:20px; }
  .container { max-width:900px; margin:0 auto; background:#fff; padding:18px; border-radius:10px; box-shadow:0 8px 24px rgba(15,23,42,0.08); }
  h1 { text-align:center; margin:6px 0 18px; }
  #globalTimer { text-align:center; font-weight:700; color:#b91c1c; margin-bottom:12px; }
  .progress { text-align:center; margin-bottom:12px; color:#555; }
  .questionBox { padding:14px; border:1px solid #e6eef8; border-radius:8px; background:#fafcff; }
  .qtext { font-weight:700; margin-bottom:8px; }
  .options label { display:block; padding:8px; border-radius:6px; margin-bottom:6px; cursor:pointer; border:1px solid transparent; }
  .options input { margin-left:8px; }
  .options label:hover { background:#eef6ff; }
  .feedback { margin-top:10px; padding:10px; border-radius:6px; background:#f8fafc; font-weight:600; }
  .correct { color: #064e3b; }
  .wrong { color: #7f1d1d; }
  .controls { display:flex; gap:10px; justify-content:space-between; align-items:center; margin-top:14px; }
  button { background:#0369a1; color:#fff; border:none; padding:10px 14px; border-radius:8px; cursor:pointer; font-weight:700; }
  button:disabled { opacity:0.5; cursor:not-allowed; }
  #perQuestionTimer { font-weight:700; color:#0f172a; }
  #resultBox { text-align:center; margin-top:18px; padding:12px; border-radius:8px; background:#f1f5f9; font-weight:800; }
  footer { text-align:center; font-size:13px; color:#6b7280; margin-top:12px; }
  @media (max-width:640px){ .controls { flex-direction:column; align-items:stretch; } }
</style>
</head>
<body>
<div class="container">
  <h1>ğŸ§ª Ø§Ø®ØªØ¨Ø§Ø± Ø§Ù„ÙƒÙŠÙ…ÙŠØ§Ø¡ â€” 50 Ø³Ø¤Ø§Ù„</h1>
  <div id="globalTimer">Ø§Ù„ÙˆÙ‚Øª Ø§Ù„Ù…ØªØ¨Ù‚ÙŠ Ø§Ù„ÙƒÙ„ÙŠ: <span id="globalTime">30:00</span></div>
  <div class="progress">Ø§Ù„Ø³Ø¤Ø§Ù„ <span id="currentIndex">1</span> Ù…Ù† <span id="totalQuestions">50</span></div>

  <div class="questionBox">
    <div class="qtext" id="qText">...Ø¬Ø§Ø±Ù Ø§Ù„ØªØ­Ù…ÙŠÙ„</div>
    <div class="options" id="options"></div>
    <div class="feedback" id="feedback" style="display:none;"></div>
    <div style="margin-top:10px; display:flex; justify-content:space-between; align-items:center;">
      <div id="perQuestionTimer">ÙˆÙ‚Øª Ø§Ù„Ø³Ø¤Ø§Ù„: <span id="qTime">01:00</span></div>
      <div style="font-size:13px;color:#4b5563;">(Ø¹Ù†Ø¯ Ø§Ù†ØªÙ‡Ø§Ø¡ Ø§Ù„Ø¯Ù‚ÙŠÙ‚Ø© ÙŠÙ†ØªÙ‚Ù„ Ù„Ù„Ø³Ø¤Ø§Ù„ Ø§Ù„ØªØ§Ù„ÙŠ ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹)</div>
    </div>
    <div class="controls">
      <button id="prevBtn">Ø§Ù„Ø³Ø§Ø¨Ù‚</button>
      <div style="display:flex;gap:10px">
        <button id="markBtn">Ø¹Ù„Ø§Ù…Ø© / Ù…Ø³Ø­ Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø©</button>
        <button id="nextBtn">Ø§Ù„ØªØ§Ù„ÙŠ</button>
      </div>
    </div>
  </div>

  <div id="resultBox" style="display:none;"></div>
  <footer>Ø¹Ù†Ø¯ Ø±ØºØ¨ØªÙƒ: Ø§Ø¶ØºØ· "Ø§Ù„ØªØ§Ù„ÙŠ" Ù„Ù„Ø§Ù†ØªÙ‚Ø§Ù„ Ø£Ùˆ Ø§Ù†ØªØ¸Ø± Ø§Ù†ØªÙ‡Ø§Ø¡ Ø§Ù„Ø¯Ù‚ÙŠÙ‚Ø© Ù„Ù„Ø³Ø¤Ø§Ù„ Ù„Ù„Ø§Ù†ØªÙ‚Ø§Ù„ ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹.</footer>
</div>

<script>
/* === Ù…ØµÙÙˆÙØ© Ø§Ù„Ø£Ø³Ø¦Ù„Ø© (50 Ø³Ø¤Ø§Ù„) ===
   ÙƒÙ„ Ø¹Ù†ØµØ±: { q: "Ø§Ù„Ù†Øµ", options: [...4 Ø®ÙŠØ§Ø±Ø§Øª...], answer: "Ø§Ù„Ù†Øµ Ø§Ù„ØµØ­ÙŠØ­" }
   â€” Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø§Øª Ù…ÙƒØªÙˆØ¨Ø© Ø¨Ø§Ù„Ø¹Ø±Ø¨ÙŠØ© ÙƒÙ…Ø§ ÙÙŠ Ø®ÙŠØ§Ø±Ø§ØªÙƒ.
*/
const questions = [
  { q:"Ù…Ù† Ù‡Ùˆ Ø£ÙˆÙ„ Ù…Ù† Ù‚Ø§Ù„ Ø¥Ù† Ø§Ù„Ù…Ø§Ø¯Ø© ØªØªÙƒÙˆÙ† Ù…Ù† Ø¬Ø³ÙŠÙ…Ø§Øª ØµØºÙŠØ±Ø© Ø³Ù…Ø§Ù‡Ø§ Ø°Ø±Ø§ØªØŸ", options:["Ø¯Ø§Ù„ØªÙˆÙ†","Ø·ÙˆÙ…Ø³ÙˆÙ†","Ø±Ø°Ø±ÙÙˆØ±Ø¯","Ø¯ÙŠÙ…ÙˆÙ‚Ø±ÙŠØ·Ø³"], answer:"Ø¯ÙŠÙ…ÙˆÙ‚Ø±ÙŠØ·Ø³" },
  { q:"Ø§ÙƒØªØ´Ù Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ† Ø§Ù„Ø¹Ø§Ù„Ù…:", options:["Ø¯Ø§Ù„ØªÙˆÙ†","Ø·ÙˆÙ…Ø³ÙˆÙ†","Ø¨ÙˆØ±","Ø´Ø±ÙˆØ¯Ù†Ø¬Ø±"], answer:"Ø·ÙˆÙ…Ø³ÙˆÙ†" },
  { q:"Ø§ÙƒØªØ´Ù Ø§Ù„Ù†ÙˆØ§Ø© Ø§Ù„Ø¹Ø§Ù„Ù…:", options:["Ø¨ÙˆØ±","Ø¯ÙŠÙ…ÙˆÙ‚Ø±ÙŠØ·Ø³","Ø±Ø°Ø±ÙÙˆØ±Ø¯","Ø¯Ø§Ù„ØªÙˆÙ†"], answer:"Ø±Ø°Ø±ÙÙˆØ±Ø¯" },
  { q:"Ù…Ù† Ù…ÙƒÙˆÙ†Ø§Øª Ø§Ù„Ø°Ø±Ø©:", options:["Ø¥Ù„ÙƒØªØ±ÙˆÙ†Ø§Øª ÙÙ‚Ø·","Ø¨Ø±ÙˆØªÙˆÙ†Ø§Øª ÙˆÙ†ÙŠÙˆØªØ±ÙˆÙ†Ø§Øª ÙˆØ¥Ù„ÙƒØªØ±ÙˆÙ†Ø§Øª","Ø¨Ø±ÙˆØªÙˆÙ†Ø§Øª ÙÙ‚Ø·","Ù†ÙŠÙˆØªØ±ÙˆÙ†Ø§Øª ÙÙ‚Ø·"], answer:"Ø¨Ø±ÙˆØªÙˆÙ†Ø§Øª ÙˆÙ†ÙŠÙˆØªØ±ÙˆÙ†Ø§Øª ÙˆØ¥Ù„ÙƒØªØ±ÙˆÙ†Ø§Øª" },
  { q:"Ø§Ù„Ø´Ø­Ù†Ø© Ø§Ù„ÙƒÙ‡Ø±Ø¨Ø§Ø¦ÙŠØ© Ù„Ù„Ø¨Ø±ÙˆØªÙˆÙ† Ù‡ÙŠ:", options:["Ø³Ø§Ù„Ø¨Ø©","Ù…ÙˆØ¬Ø¨Ø©","Ù…ØªØ¹Ø§Ø¯Ù„Ø©","ØºÙŠØ± Ù…Ø¹Ø±ÙˆÙØ©"], answer:"Ù…ÙˆØ¬Ø¨Ø©" },
  { q:"Ø§Ù„Ø´Ø­Ù†Ø© Ø§Ù„ÙƒÙ‡Ø±Ø¨Ø§Ø¦ÙŠØ© Ù„Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ† Ù‡ÙŠ:", options:["Ù…ÙˆØ¬Ø¨Ø©","Ø³Ø§Ù„Ø¨Ø©","Ù…ØªØ¹Ø§Ø¯Ù„Ø©","ØµÙØ±"], answer:"Ø³Ø§Ù„Ø¨Ø©" },
  { q:"Ø§Ù„Ù†ÙŠÙˆØªØ±ÙˆÙ† ÙŠØ­Ù…Ù„ Ø´Ø­Ù†Ø©:", options:["Ø³Ø§Ù„Ø¨Ø©","Ù…ÙˆØ¬Ø¨Ø©","Ù…ØªØ¹Ø§Ø¯Ù„Ø©","Ù…Ø²Ø¯ÙˆØ¬Ø©"], answer:"Ù…ØªØ¹Ø§Ø¯Ù„Ø©" },
  { q:"ØªØªØ±ÙƒØ² ÙƒØªÙ„Ø© Ø§Ù„Ø°Ø±Ø© ÙÙŠ:", options:["Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†Ø§Øª","Ø§Ù„Ù†ÙˆØ§Ø©","Ø§Ù„Ù…Ø¯Ø§Ø± Ø§Ù„Ø£Ø®ÙŠØ±","Ù…Ø³ØªÙˆÙŠØ§Øª Ø§Ù„Ø·Ø§Ù‚Ø©"], answer:"Ø§Ù„Ù†ÙˆØ§Ø©" },
  { q:"Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†Ø§Øª ØªÙˆØ¬Ø¯ ÙÙŠ:", options:["Ø¯Ø§Ø®Ù„ Ø§Ù„Ù†ÙˆØ§Ø©","Ø­ÙˆÙ„ Ø§Ù„Ù†ÙˆØ§Ø©","Ø¯Ø§Ø®Ù„ Ø§Ù„Ø¨Ø±ÙˆØªÙˆÙ†","ÙÙŠ Ø§Ù„ÙØ±Ø§Øº"], answer:"Ø­ÙˆÙ„ Ø§Ù„Ù†ÙˆØ§Ø©" },
  { q:"Ø§Ù„Ø¹Ø¯Ø¯ Ø§Ù„Ø°Ø±ÙŠ Ù„Ù„Ø¹Ù†ØµØ± ÙŠØ³Ø§ÙˆÙŠ Ø¹Ø¯Ø¯:", options:["Ø§Ù„Ù†ÙŠÙˆØªØ±ÙˆÙ†Ø§Øª","Ø§Ù„Ø¨Ø±ÙˆØªÙˆÙ†Ø§Øª","Ø§Ù„ÙƒØªÙ„Ø©","Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†Ø§Øª + Ø§Ù„Ù†ÙŠÙˆØªØ±ÙˆÙ†Ø§Øª"], answer:"Ø§Ù„Ø¨Ø±ÙˆØªÙˆÙ†Ø§Øª" },

  { q:"Ø§Ù„Ø¹Ø¯Ø¯ Ø§Ù„ÙƒØªÙ„ÙŠ ÙŠØ³Ø§ÙˆÙŠ:", options:["Ø§Ù„Ø¨Ø±ÙˆØªÙˆÙ†Ø§Øª ÙÙ‚Ø·","Ø§Ù„Ù†ÙŠÙˆØªØ±ÙˆÙ†Ø§Øª ÙÙ‚Ø·","Ø§Ù„Ø¨Ø±ÙˆØªÙˆÙ†Ø§Øª + Ø§Ù„Ù†ÙŠÙˆØªØ±ÙˆÙ†Ø§Øª","Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†Ø§Øª + Ø§Ù„Ù†ÙŠÙˆØªØ±ÙˆÙ†Ø§Øª"], answer:"Ø§Ù„Ø¨Ø±ÙˆØªÙˆÙ†Ø§Øª + Ø§Ù„Ù†ÙŠÙˆØªØ±ÙˆÙ†Ø§Øª" },
  { q:"Ø§Ù„Ø¹Ù†ØµØ± Ø§Ù„Ø°ÙŠ Ù„Ù‡ Ù†ÙØ³ Ø§Ù„Ø¹Ø¯Ø¯ Ø§Ù„Ø°Ø±ÙŠ ÙŠØ®ØªÙ„Ù ÙÙŠ Ø¹Ø¯Ø¯ Ø§Ù„Ù†ÙŠÙˆØªØ±ÙˆÙ†Ø§Øª ÙŠØ³Ù…Ù‰:", options:["Ù†Ø¸ÙŠØ±","Ø£ÙŠÙˆÙ†","Ù…Ø±ÙƒØ¨","Ø¬Ø²ÙŠØ¡"], answer:"Ù†Ø¸ÙŠØ±" },
  { q:"Ø°Ø±Ø© Ø§Ù„Ù‡ÙŠØ¯Ø±ÙˆØ¬ÙŠÙ† Ø§Ù„ØªÙŠ Ù„Ø§ ØªØ­ØªÙˆÙŠ Ø¹Ù„Ù‰ Ù†ÙŠÙˆØªØ±ÙˆÙ†Ø§Øª Ù‡ÙŠ:", options:["Ø§Ù„Ø¨Ø±ÙˆØªÙŠÙˆÙ…","Ø§Ù„Ø¯ÙŠÙˆØªÙŠØ±ÙŠÙˆÙ…","Ø§Ù„ØªØ±ÙŠØªÙŠÙˆÙ…","Ø§Ù„Ù†Ø¸ÙŠØ± Ø§Ù„Ø«Ø§Ù†ÙŠ"], answer:"Ø§Ù„Ø¨Ø±ÙˆØªÙŠÙˆÙ…" },
  { q:"Ø§Ù„Ù†Ù…ÙˆØ°Ø¬ Ø§Ù„Ø°Ø±ÙŠ Ø§Ù„Ø°ÙŠ ÙŠØ´Ø¨Ù‡ Ø§Ù„Ù†Ø¸Ø§Ù… Ø§Ù„Ø´Ù…Ø³ÙŠ Ù‡Ùˆ Ù†Ù…ÙˆØ°Ø¬:", options:["Ø¨ÙˆØ±","Ø±Ø°Ø±ÙÙˆØ±Ø¯","Ø·ÙˆÙ…Ø³ÙˆÙ†","Ø¯Ø§Ù„ØªÙˆÙ†"], answer:"Ø±Ø°Ø±ÙÙˆØ±Ø¯" },
  { q:"Ù†Ù…ÙˆØ°Ø¬ Ø·ÙˆÙ…Ø³ÙˆÙ† Ù„Ù„Ø°Ø±Ø© ÙŠØ³Ù…Ù‰:", options:["Ø§Ù„Ù†Ù…ÙˆØ°Ø¬ Ø§Ù„ÙƒØ±ÙˆÙŠ","Ù†Ù…ÙˆØ°Ø¬ Ø§Ù„ÙØ·ÙŠØ±Ø©","Ù†Ù…ÙˆØ°Ø¬ ÙƒØ±Ø© Ø§Ù„Ø¨Ù„ÙŠØ§Ø±Ø¯Ùˆ","Ù†Ù…ÙˆØ°Ø¬ Ø§Ù„Ø³Ø­Ø§Ø¨Ø© Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠØ©"], answer:"Ù†Ù…ÙˆØ°Ø¬ Ø§Ù„ÙØ·ÙŠØ±Ø©" },
  { q:"Ù†Ù…ÙˆØ°Ø¬ Ø¨ÙˆØ± ÙˆØ¶Ù‘Ø­ Ø£Ù† Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†Ø§Øª:", options:["Ø³Ø§ÙƒÙ†Ø© ÙÙŠ Ø£Ù…Ø§ÙƒÙ†Ù‡Ø§","ØªØ¯ÙˆØ± ÙÙŠ Ù…Ø¯Ø§Ø±Ø§Øª Ù…Ø­Ø¯Ø¯Ø© Ø§Ù„Ø·Ø§Ù‚Ø©","ØªÙˆØ¬Ø¯ ÙÙŠ Ø§Ù„Ù†ÙˆØ§Ø©","ØªØ®ØªÙÙŠ ÙØ¬Ø£Ø©"], answer:"ØªØ¯ÙˆØ± ÙÙŠ Ù…Ø¯Ø§Ø±Ø§Øª Ù…Ø­Ø¯Ø¯Ø© Ø§Ù„Ø·Ø§Ù‚Ø©" },
  { q:"Ø±Ù…Ø² Ø§Ù„Ø¹Ù†ØµØ± ÙŠØ¹Ø¨Ù‘Ø± Ø¹Ù†:", options:["Ø¹Ø¯Ø¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†Ø§Øª ÙÙ‚Ø·","Ø§Ø³Ù… Ø§Ù„Ø¹Ù†ØµØ± ÙˆØ¹Ø¯Ø¯Ù‡ Ø§Ù„Ø°Ø±ÙŠ","Ù†ÙˆØ¹ Ø§Ù„Ø¹Ù†ØµØ± ÙÙ‚Ø·","Ø§Ù„ÙƒØªÙ„Ø© ÙÙ‚Ø·"], answer:"Ø§Ø³Ù… Ø§Ù„Ø¹Ù†ØµØ± ÙˆØ¹Ø¯Ø¯Ù‡ Ø§Ù„Ø°Ø±ÙŠ" },
  { q:"Ù…Ø§ Ø§Ù„Ø°ÙŠ ÙŠØ­Ø¯Ø¯ Ù‡ÙˆÙŠØ© Ø§Ù„Ø¹Ù†ØµØ±ØŸ", options:["Ø¹Ø¯Ø¯ Ø§Ù„Ù†ÙŠÙˆØªØ±ÙˆÙ†Ø§Øª","Ø¹Ø¯Ø¯ Ø§Ù„Ø¨Ø±ÙˆØªÙˆÙ†Ø§Øª","Ø¹Ø¯Ø¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†Ø§Øª","Ø¹Ø¯Ø¯ Ø§Ù„ÙƒØªÙ„Ø©"], answer:"Ø¹Ø¯Ø¯ Ø§Ù„Ø¨Ø±ÙˆØªÙˆÙ†Ø§Øª" },
  { q:"Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†Ø§Øª ÙÙŠ Ø§Ù„Ù…Ø³ØªÙˆÙ‰ Ø§Ù„Ø£Ø®ÙŠØ± ØªØ³Ù…Ù‰:", options:["Ø§Ù„Ø¯Ø§Ø®Ù„ÙŠØ©","Ø§Ù„ØªÙƒØ§ÙØ¤","Ø§Ù„Ø­Ø±Ø©","Ø§Ù„Ø³Ø§Ù„Ø¨Ø©"], answer:"Ø§Ù„ØªÙƒØ§ÙØ¤" },
  { q:"Ù…Ø§Ø°Ø§ ÙŠØ­Ø¯Ø« Ø¹Ù†Ø¯ ÙÙ‚Ø¯Ø§Ù† Ø§Ù„Ø°Ø±Ø© Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ØŸ", options:["ØªØµØ¨Ø­ Ù…ØªØ¹Ø§Ø¯Ù„Ø©","ØªØµØ¨Ø­ Ø£ÙŠÙˆÙ†Ù‹Ø§ Ù…ÙˆØ¬Ø¨Ù‹Ø§","ØªØµØ¨Ø­ Ø£ÙŠÙˆÙ†Ù‹Ø§ Ø³Ø§Ù„Ø¨Ù‹Ø§","ØªØ²Ø¯Ø§Ø¯ ÙƒØªÙ„ØªÙ‡Ø§"], answer:"ØªØµØ¨Ø­ Ø£ÙŠÙˆÙ†Ù‹Ø§ Ù…ÙˆØ¬Ø¨Ù‹Ø§" },

  { q:"Ø¹Ø¯Ø¯ Ù…Ø³ØªÙˆÙŠØ§Øª Ø§Ù„Ø·Ø§Ù‚Ø© Ø§Ù„Ø±Ø¦ÙŠØ³Ø© ÙÙŠ Ø§Ù„Ø°Ø±Ø© Ù‡Ùˆ:", options:["3","5","7","9"], answer:"7" },
  { q:"Ø£ÙˆÙ„ Ù…Ø³ØªÙˆÙ‰ Ø·Ø§Ù‚Ø© Ø±Ø¦ÙŠØ³ÙŠ ÙŠØ³ØªØ·ÙŠØ¹ Ø­Ù…Ù„:", options:["Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠÙ†","4 Ø¥Ù„ÙƒØªØ±ÙˆÙ†Ø§Øª","8 Ø¥Ù„ÙƒØªØ±ÙˆÙ†Ø§Øª","18 Ø¥Ù„ÙƒØªØ±ÙˆÙ†Ù‹Ø§"], answer:"Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠÙ†" },
  { q:"Ø§Ù„ØµÙŠØºØ© Ø§Ù„Ø¹Ø§Ù…Ø© Ù„Ø­Ø³Ø§Ø¨ Ø¹Ø¯Ø¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†Ø§Øª ÙÙŠ Ø£ÙŠ Ù…Ø³ØªÙˆÙ‰ Ø·Ø§Ù‚Ø© Ù‡ÙŠ:", options:["2nÂ²","nÂ²","4n","2n"], answer:"2nÂ²" },
  { q:"Ø§Ù„Ù…Ø³ØªÙˆÙ‰ Ø§Ù„Ø«Ø§Ù„Ø« ÙŠÙ…ÙƒÙ† Ø£Ù† ÙŠØ­ØªÙˆÙŠ Ø¹Ù„Ù‰:", options:["2 Ø¥Ù„ÙƒØªØ±ÙˆÙ†","8 Ø¥Ù„ÙƒØªØ±ÙˆÙ†Ø§Øª","18 Ø¥Ù„ÙƒØªØ±ÙˆÙ†","32 Ø¥Ù„ÙƒØªØ±ÙˆÙ†"], answer:"18 Ø¥Ù„ÙƒØªØ±ÙˆÙ†" },
  { q:"Ø§Ù„Ø¹Ø§Ù„Ù… Ø§Ù„Ø°ÙŠ ÙˆØ¶Ø¹ Ù…Ø¹Ø§Ø¯Ù„Ø© ØªØµÙ Ø­Ø±ÙƒØ© Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†Ø§Øª ÙƒÙ…ÙˆØ¬Ø§Øª Ù‡Ùˆ:", options:["Ø¨ÙˆØ±","Ø´Ø±ÙˆØ¯Ù†Ø¬Ø±","Ø¯Ø§Ù„ØªÙˆÙ†","Ø±Ø°Ø±ÙÙˆØ±Ø¯"], answer:"Ø´Ø±ÙˆØ¯Ù†Ø¬Ø±" },
  { q:"Ø§Ù„Ù†Ù…ÙˆØ°Ø¬ Ø§Ù„Ù…ÙŠÙƒØ§Ù†ÙŠÙƒÙŠ Ø§Ù„ÙƒÙ…ÙŠ Ù„Ù„Ø°Ø±Ø© ÙˆØµÙ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†Ø§Øª Ø¨Ø£Ù†Ù‡Ø§:", options:["Ø¬Ø³ÙŠÙ…Ø§Øª Ø«Ø§Ø¨ØªØ©","Ø¬Ø³ÙŠÙ…Ø§Øª ÙˆÙ…ÙˆØ¬Ø§Øª ÙÙŠ Ù†ÙØ³ Ø§Ù„ÙˆÙ‚Øª","Ø¨Ø±ÙˆØªÙˆÙ†Ø§Øª","Ø·Ø§Ù‚Ø© ÙÙ‚Ø·"], answer:"Ø¬Ø³ÙŠÙ…Ø§Øª ÙˆÙ…ÙˆØ¬Ø§Øª ÙÙŠ Ù†ÙØ³ Ø§Ù„ÙˆÙ‚Øª" },
  { q:"Ø£ÙŠ Ù…Ù† Ø§Ù„Ø¬Ø³ÙŠÙ…Ø§Øª Ø§Ù„ØªØ§Ù„ÙŠØ© ÙƒØªÙ„ØªÙ‡ Ø£ØµØºØ±ØŸ", options:["Ø§Ù„Ø¨Ø±ÙˆØªÙˆÙ†","Ø§Ù„Ù†ÙŠÙˆØªØ±ÙˆÙ†","Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†","Ø§Ù„Ù†ÙˆØ§Ø©"], answer:"Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†" },
  { q:"Ø§Ù„Ø¬Ø³ÙŠÙ…Ø§Øª Ø§Ù„Ù…ÙˆØ¬ÙˆØ¯Ø© ÙÙŠ Ø§Ù„Ù†ÙˆØ§Ø© Ù‡ÙŠ:", options:["Ø§Ù„Ø¨Ø±ÙˆØªÙˆÙ†Ø§Øª ÙˆØ§Ù„Ù†ÙŠÙˆØªØ±ÙˆÙ†Ø§Øª","Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†Ø§Øª ÙÙ‚Ø·","Ø§Ù„Ø¨Ø±ÙˆØªÙˆÙ†Ø§Øª ÙÙ‚Ø·","Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†Ø§Øª ÙˆØ§Ù„Ù†ÙŠÙˆØªØ±ÙˆÙ†Ø§Øª"], answer:"Ø§Ù„Ø¨Ø±ÙˆØªÙˆÙ†Ø§Øª ÙˆØ§Ù„Ù†ÙŠÙˆØªØ±ÙˆÙ†Ø§Øª" },
  { q:"ÙˆØ­Ø¯Ø© Ø§Ù„ÙƒØªÙ„Ø© Ø§Ù„Ø°Ø±ÙŠØ© ØªØ¹Ø§Ø¯Ù„ ØªÙ‚Ø±ÙŠØ¨Ù‹Ø§ ÙƒØªÙ„Ø©:", options:["Ø¥Ù„ÙƒØªØ±ÙˆÙ†","Ù†ÙŠÙˆØªØ±ÙˆÙ†","Ø¨Ø±ÙˆØªÙˆÙ†","Ù†ÙˆØ§Ø©"], answer:"Ù†ÙŠÙˆØªØ±ÙˆÙ†" },

  { q:"Ø¥Ø°Ø§ ÙƒØ§Ù† Ø¹Ø¯Ø¯ Ø§Ù„Ø¨Ø±ÙˆØªÙˆÙ†Ø§Øª = Ø¹Ø¯Ø¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†Ø§ØªØŒ ÙØ¥Ù† Ø§Ù„Ø°Ø±Ø© ØªÙƒÙˆÙ†:", options:["Ù…ÙˆØ¬Ø¨Ø©","Ø³Ø§Ù„Ø¨Ø©","Ù…ØªØ¹Ø§Ø¯Ù„Ø©","Ù…Ø´Ø­ÙˆÙ†Ø©"], answer:"Ù…ØªØ¹Ø§Ø¯Ù„Ø©" },
  { q:"Ø§Ù„Ù†Ø¸ÙŠØ±ÙŠÙ† ÙŠØ®ØªÙ„ÙØ§Ù† ÙÙŠ:", options:["Ø¹Ø¯Ø¯ Ø§Ù„Ø¨Ø±ÙˆØªÙˆÙ†Ø§Øª","Ø¹Ø¯Ø¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†Ø§Øª","Ø¹Ø¯Ø¯ Ø§Ù„Ù†ÙŠÙˆØªØ±ÙˆÙ†Ø§Øª","Ù†ÙˆØ¹ Ø§Ù„Ø¹Ù†ØµØ±"], answer:"Ø¹Ø¯Ø¯ Ø§Ù„Ù†ÙŠÙˆØªØ±ÙˆÙ†Ø§Øª" },
  { q:"Ù…Ø¬Ù…ÙˆØ¹ Ø§Ù„Ø¨Ø±ÙˆØªÙˆÙ†Ø§Øª ÙˆØ§Ù„Ù†ÙŠÙˆØªØ±ÙˆÙ†Ø§Øª ÙÙŠ Ø§Ù„Ø°Ø±Ø© ÙŠØ³Ù…Ù‰:", options:["Ø§Ù„Ø¹Ø¯Ø¯ Ø§Ù„Ø°Ø±ÙŠ","Ø§Ù„Ø¹Ø¯Ø¯ Ø§Ù„ÙƒØªÙ„ÙŠ","Ø±Ù‚Ù… Ø§Ù„Ø·Ø§Ù‚Ø©","Ø±Ù‚Ù… Ø§Ù„Ù…Ø¯Ø§Ø±"], answer:"Ø§Ù„Ø¹Ø¯Ø¯ Ø§Ù„ÙƒØªÙ„ÙŠ" },
  { q:"Ù…Ø§ Ø§Ù„Ø¬Ø³ÙŠÙ…Ø§Øª Ø§Ù„ØªÙŠ ØªØ­Ø¯Ø¯ Ø§Ù„Ù†Ø´Ø§Ø· Ø§Ù„ÙƒÙŠÙ…ÙŠØ§Ø¦ÙŠ Ù„Ù„Ø¹Ù†ØµØ±ØŸ", options:["Ø§Ù„Ù†ÙŠÙˆØªØ±ÙˆÙ†Ø§Øª","Ø¥Ù„ÙƒØªØ±ÙˆÙ†Ø§Øª Ø§Ù„ØªÙƒØ§ÙØ¤","Ø§Ù„Ø¨Ø±ÙˆØªÙˆÙ†Ø§Øª","Ø¬Ù…ÙŠØ¹Ù‡Ø§"], answer:"Ø¥Ù„ÙƒØªØ±ÙˆÙ†Ø§Øª Ø§Ù„ØªÙƒØ§ÙØ¤" },
  { q:"Ø£ÙˆÙ„ Ù…Ù† Ø§ÙØªØ±Ø¶ Ø£Ù† Ø§Ù„Ø°Ø±Ø© ØºÙŠØ± Ù‚Ø§Ø¨Ù„Ø© Ù„Ù„Ø§Ù†Ù‚Ø³Ø§Ù… Ù‡Ùˆ:", options:["Ø¨ÙˆØ±","Ø¯ÙŠÙ…ÙˆÙ‚Ø±ÙŠØ·Ø³","Ø·ÙˆÙ…Ø³ÙˆÙ†","Ø´Ø±ÙˆØ¯Ù†Ø¬Ø±"], answer:"Ø¯ÙŠÙ…ÙˆÙ‚Ø±ÙŠØ·Ø³" },
  { q:"Ø¬Ø³ÙŠÙ… ÙŠØ­Ù…Ù„ Ø§Ù„Ø´Ø­Ù†Ø© Ø§Ù„Ø³Ø§Ù„Ø¨Ø© ÙˆÙƒØªÙ„ØªÙ‡ ØµØºÙŠØ±Ø© Ø¬Ø¯Ù‹Ø§:", options:["Ø¨Ø±ÙˆØªÙˆÙ†","Ø¥Ù„ÙƒØªØ±ÙˆÙ†","Ù†ÙŠÙˆØªØ±ÙˆÙ†","Ù†ÙˆØ§Ø©"], answer:"Ø¥Ù„ÙƒØªØ±ÙˆÙ†" },
  { q:"Ø§Ù„Ø°Ø±Ø§Øª Ø§Ù„ØªÙŠ ØªÙÙ‚Ø¯ Ø£Ùˆ ØªÙƒØªØ³Ø¨ Ø¥Ù„ÙƒØªØ±ÙˆÙ†Ø§Øª ØªØ³Ù…Ù‰:", options:["Ø£ÙŠÙˆÙ†Ø§Øª","Ù†Ø¸Ø§Ø¦Ø±","Ù…Ø±ÙƒØ¨Ø§Øª","Ø¬Ø³ÙŠÙ…Ø§Øª Ø£Ù„ÙØ§"], answer:"Ø£ÙŠÙˆÙ†Ø§Øª" },
  { q:"Ø£ÙŠ Ù…Ù…Ø§ ÙŠÙ„ÙŠ Ù„Ù‡ Ø´Ø­Ù†Ø© Ù…ÙˆØ¬Ø¨Ø©ØŸ", options:["Ø§Ù„Ù†ÙˆØ§Ø©","Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†","Ø§Ù„Ù…Ø¯Ø§Ø±","Ø§Ù„Ø³Ø­Ø§Ø¨Ø©"], answer:"Ø§Ù„Ù†ÙˆØ§Ø©" },
  { q:"Ø¥Ø°Ø§ ÙƒØ§Ù† Ø§Ù„Ø¹Ù†ØµØ± ÙŠØ­ØªÙˆÙŠ Ø¹Ù„Ù‰ 17 Ø¨Ø±ÙˆØªÙˆÙ†Ù‹Ø§ØŒ ÙØ¥Ù† Ø¹Ø¯Ø¯Ù‡ Ø§Ù„Ø°Ø±ÙŠ Ù‡Ùˆ:", options:["16","17","18","34"], answer:"17" },

  { q:"Ø£ÙŠ Ù…Ù…Ø§ ÙŠÙ„ÙŠ ÙŠÙØ¹Ø¯ Ø¬Ø³ÙŠÙ…Ù‹Ø§ Ø¯ÙˆÙ† Ø°Ø±ÙŠØŸ", options:["Ø§Ù„Ø°Ø±Ø©","Ø§Ù„Ø¨Ø±ÙˆØªÙˆÙ†","Ø§Ù„Ø¹Ù†ØµØ±","Ø§Ù„Ø¬Ø²ÙŠØ¡"], answer:"Ø§Ù„Ø¨Ø±ÙˆØªÙˆÙ†" },
  { q:"Ø§Ù„Ù†ÙˆØ§Ø© ØªØ­ØªÙˆÙŠ Ø¹Ù„Ù‰:", options:["Ø¨Ø±ÙˆØªÙˆÙ†Ø§Øª ÙÙ‚Ø·","Ù†ÙŠÙˆØªØ±ÙˆÙ†Ø§Øª ÙÙ‚Ø·","Ø¨Ø±ÙˆØªÙˆÙ†Ø§Øª ÙˆÙ†ÙŠÙˆØªØ±ÙˆÙ†Ø§Øª","Ø¥Ù„ÙƒØªØ±ÙˆÙ†Ø§Øª"], answer:"Ø¨Ø±ÙˆØªÙˆÙ†Ø§Øª ÙˆÙ†ÙŠÙˆØªØ±ÙˆÙ†Ø§Øª" },
  { q:"ÙƒØªÙ„Ø© Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ† ØªØ³Ø§ÙˆÙŠ ØªÙ‚Ø±ÙŠØ¨Ù‹Ø§:", options:["Ù…Ø«Ù„ Ø§Ù„Ø¨Ø±ÙˆØªÙˆÙ†","Ù†ØµÙ Ø§Ù„Ø¨Ø±ÙˆØªÙˆÙ†","ØµØºÙŠØ±Ø© Ø¬Ø¯Ù‹Ø§","Ù…Ø«Ù„ Ø§Ù„Ù†ÙŠÙˆØªØ±ÙˆÙ†"], answer:"ØµØºÙŠØ±Ø© Ø¬Ø¯Ù‹Ø§" },
  { q:"Ø§Ù„Ø°Ø±Ø© Ø§Ù„ØªÙŠ ØªÙÙ‚Ø¯ Ø¥Ù„ÙƒØªØ±ÙˆÙ†Ù‹Ø§ ØªØµØ¨Ø­:", options:["Ø³Ø§Ù„Ø¨Ø©","Ù…ÙˆØ¬Ø¨Ø©","Ù…ØªØ¹Ø§Ø¯Ù„Ø©","Ù†Ø¸ÙŠØ±"], answer:"Ù…ÙˆØ¬Ø¨Ø©" },
  { q:"Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†Ø§Øª ØªØ¯ÙˆØ± Ø­ÙˆÙ„ Ø§Ù„Ù†ÙˆØ§Ø© Ø¨Ø³Ø¨Ø¨:", options:["Ø§Ù„Ø¬Ø§Ø°Ø¨ÙŠØ©","Ø§Ù„Ù‚ÙˆØ© Ø§Ù„ÙƒÙ‡Ø±Ø¨Ø§Ø¦ÙŠØ©","Ø§Ù„ÙƒØªÙ„Ø©","Ø§Ù„Ø¹Ø´ÙˆØ§Ø¦ÙŠØ©"], answer:"Ø§Ù„Ù‚ÙˆØ© Ø§Ù„ÙƒÙ‡Ø±Ø¨Ø§Ø¦ÙŠØ©" },
  { q:"Ø£ÙƒØ¨Ø± ÙƒØªÙ„Ø© ØªÙˆØ¬Ø¯ ÙÙŠ:", options:["Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†","Ø§Ù„Ù†ÙˆØ§Ø©","Ø§Ù„Ù…Ø¯Ø§Ø± Ø§Ù„Ø£Ø®ÙŠØ±","Ø§Ù„Ø³Ø­Ø§Ø¨Ø© Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠØ©"], answer:"Ø§Ù„Ù†ÙˆØ§Ø©" },
  { q:"Ø±Ù…Ø² Ø§Ù„Ø¹Ù†ØµØ± Ø§Ù„Ø°ÙŠ ÙŠØ­ØªÙˆÙŠ Ø¹Ù„Ù‰ 11 Ø¨Ø±ÙˆØªÙˆÙ† Ù‡Ùˆ:", options:["Na","Cl","O","N"], answer:"Na" },
  { q:"Ø§Ù„Ù†Ù…ÙˆØ°Ø¬ Ø§Ù„Ø°ÙŠ ÙˆØµÙ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†Ø§Øª ÙƒØ³Ø­Ø§Ø¨Ø© Ù…Ù† Ø§Ù„Ø§Ø­ØªÙ…Ø§Ù„Ø§Øª Ù‡Ùˆ:", options:["Ø¨ÙˆØ±","Ø´Ø±ÙˆØ¯Ù†Ø¬Ø±","Ø±Ø°Ø±ÙÙˆØ±Ø¯","Ø·ÙˆÙ…Ø³ÙˆÙ†"], answer:"Ø´Ø±ÙˆØ¯Ù†Ø¬Ø±" },

  { q:"ØªØ³Ù…Ù‰ Ø§Ù„Ù…Ù†Ø·Ù‚Ø© Ø§Ù„ØªÙŠ ÙŠÙˆØ¬Ø¯ ÙÙŠÙ‡Ø§ Ø§Ø­ØªÙ…Ø§Ù„ ÙƒØ¨ÙŠØ± Ù„ÙˆØ¬ÙˆØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†:", options:["Ø§Ù„Ù…Ø¯Ø§Ø±","Ø§Ù„Ø³Ø­Ø§Ø¨Ø© Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠØ©","Ø§Ù„Ù†ÙˆØ§Ø©","Ø§Ù„Ù…Ø³ØªÙˆÙ‰ Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠ"], answer:"Ø§Ù„Ø³Ø­Ø§Ø¨Ø© Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠØ©" },
  { q:"Ø¹Ø¯Ø¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†Ø§Øª ÙÙŠ Ø§Ù„Ø°Ø±Ø© Ø§Ù„Ù…ØªØ¹Ø§Ø¯Ù„Ø© ÙŠØ³Ø§ÙˆÙŠ Ø¹Ø¯Ø¯:", options:["Ø§Ù„Ø¨Ø±ÙˆØªÙˆÙ†Ø§Øª","Ø§Ù„Ù†ÙŠÙˆØªØ±ÙˆÙ†Ø§Øª","Ø§Ù„Ù†ÙˆØ§Ø©","Ø§Ù„Ø·Ø§Ù‚Ø©"], answer:"Ø§Ù„Ø¨Ø±ÙˆØªÙˆÙ†Ø§Øª" },
  { q:"Ø§Ù„Ø¹Ø§Ù„Ù… Ø§Ù„Ø°ÙŠ ÙˆØ¶Ø¹ Ø£ÙˆÙ„ Ù†Ø¸Ø±ÙŠØ© Ø°Ø±ÙŠØ© Ø¹Ù„Ù…ÙŠØ© Ù‡Ùˆ:", options:["Ø¨ÙˆØ±","Ø¯Ø§Ù„ØªÙˆÙ†","Ø·ÙˆÙ…Ø³ÙˆÙ†","Ø±Ø°Ø±ÙÙˆØ±Ø¯"], answer:"Ø¯Ø§Ù„ØªÙˆÙ†" },
  { q:"Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø°Ø±Ø§Øª Ù„Ø¹Ù†ØµØ± Ù…Ø¹ÙŠÙ† Ù„Ù‡Ø§ Ù†ÙØ³:", options:["Ø¹Ø¯Ø¯ Ø§Ù„Ù†ÙŠÙˆØªØ±ÙˆÙ†Ø§Øª","Ø¹Ø¯Ø¯ Ø§Ù„Ø¨Ø±ÙˆØªÙˆÙ†Ø§Øª","Ø¹Ø¯Ø¯ Ø§Ù„ÙƒØªÙ„Ø©","Ø¹Ø¯Ø¯ Ø§Ù„Ø·Ø§Ù‚Ø©"], answer:"Ø¹Ø¯Ø¯ Ø§Ù„Ø¨Ø±ÙˆØªÙˆÙ†Ø§Øª" }
];

/* === Ø­Ø§Ù„Ø© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… ÙˆØ¥Ø¬Ø§Ø¨Ø§Øª Ù…Ø­ÙÙˆØ¸Ø© === */
const totalQuestions = questions.length;
document.getElementById('totalQuestions').innerText = totalQuestions;
let current = 0;
let userAnswers = new Array(totalQuestions).fill(null);
let perQuestionTimes = new Array(totalQuestions).fill(60); // Ø«ÙˆØ§Ù†ÙŠ Ù„ÙƒÙ„ Ø³Ø¤Ø§Ù„ Ù…ØªØ§Ø­Ø©
let answeredFlags = new Array(totalQuestions).fill(false);

/* === Ø¹Ù†Ø§ØµØ± Ø§Ù„ÙˆØ§Ø¬Ù‡Ø© === */
const qText = document.getElementById('qText');
const optionsDiv = document.getElementById('options');
const feedbackDiv = document.getElementById('feedback');
const currentIndexSpan = document.getElementById('currentIndex');
const qTimeSpan = document.getElementById('qTime');
const globalTimeSpan = document.getElementById('globalTime');
const prevBtn = document.getElementById('prevBtn');
const nextBtn = document.getElementById('nextBtn');
const markBtn = document.getElementById('markBtn');
const resultBox = document.getElementById('resultBox');

/* === Ø§Ù„Ù…Ø¤Ù‚Øª Ø§Ù„ÙƒÙ„ÙŠ (30 Ø¯Ù‚ÙŠÙ‚Ø©) === */
let totalSeconds = 30 * 60; // 30 Ø¯Ù‚ÙŠÙ‚Ø©
function formatTime(s){
  const m = Math.floor(s/60).toString().padStart(2,'0');
  const sec = (s%60).toString().padStart(2,'0');
  return `${m}:${sec}`;
}
globalTimeSpan.innerText = formatTime(totalSeconds);
let globalInterval = setInterval(()=>{
  totalSeconds--;
  if(totalSeconds < 0){
    clearInterval(globalInterval);
    submitAll();
    return;
  }
  globalTimeSpan.innerText = formatTime(totalSeconds);
},1000);

/* === Ø§Ù„Ù…Ø¤Ù‚Øª Ù„ÙƒÙ„ Ø³Ø¤Ø§Ù„ (ÙŠØ­ØªØ³Ø¨ Ø¹Ù„Ù‰ Ø§Ù„Ø³Ø¤Ø§Ù„ Ø§Ù„Ø­Ø§Ù„ÙŠ) === */
let perInterval = null;
function startPerQuestionTimer(){
  clearInterval(perInterval);
  perInterval = setInterval(()=>{
    perQuestionTimes[current]--;
    qTimeSpan.innerText = formatTime(perQuestionTimes[current]);
    if(perQuestionTimes[current] <= 0){
      clearInterval(perInterval);
      // Ø¥Ù† Ù„Ù… ÙŠØ¬Ø¨ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ØŒ Ù†Ø¹ØªØ¨Ø±Ù‡ Ù„Ù… ÙŠØ®ØªØ§Ø± ÙˆÙ†Ù†ØªÙ‚Ù„ Ù…Ø¹ Ø¥Ø¸Ù‡Ø§Ø± Ø±Ø³Ø§Ù„Ø©
      if(!answeredFlags[current]){
        showFeedback(null); // Ø¨Ø¯ÙˆÙ† Ø§Ø®ØªÙŠØ§Ø±
      }
      // Ø¨Ø¹Ø¯ 1 Ø«Ø§Ù†ÙŠØ© Ø§Ù†ØªÙ‚Ù„ Ù„Ù„Ø³Ø¤Ø§Ù„ Ø§Ù„ØªØ§Ù„ÙŠ ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹
      setTimeout(()=> {
        if(current < totalQuestions - 1) goToQuestion(current + 1);
        else submitAll();
      }, 800);
    }
  },1000);
}

/* === Ø¹Ø±Ø¶ Ø§Ù„Ø³Ø¤Ø§Ù„ Ø§Ù„Ø­Ø§Ù„ÙŠ === */
function renderQuestion(idx){
  current = idx;
  currentIndexSpan.innerText = current + 1;
  qText.innerText = `${current+1}. ${questions[current].q}`;
  optionsDiv.innerHTML = '';
  feedbackDiv.style.display = 'none';
  feedbackDiv.innerHTML = '';
  // Ø¹Ø±Ø¶ Ø§Ù„Ø®ÙŠØ§Ø±Ø§Øª
  questions[current].options.forEach((opt, i) => {
    const id = `opt_${current}_${i}`;
    const label = document.createElement('label');
    label.innerHTML = `<input type="radio" name="r${current}" id="${id}" value="${opt}"> ${opt}`;
    optionsDiv.appendChild(label);
    // restore previous answer if Ù…ÙˆØ¬ÙˆØ¯
    const radio = label.querySelector('input');
    radio.addEventListener('change', () => {
      // Ø­ÙØ¸ Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø© ÙˆØ§Ø¸Ù‡Ø§Ø± Ø§Ù„ØªØ¹Ù‚ÙŠØ¨ ÙÙˆØ±Ø§Ù‹
      userAnswers[current] = radio.value;
      answeredFlags[current] = true;
      showFeedback(radio.value);
    });
    if(userAnswers[current] === opt){
      radio.checked = true;
    }
  });
  // Ø¹Ø±Ø¶ Ø§Ù„ÙˆÙ‚Øª Ø§Ù„Ù…ØªØ¨Ù‚ÙŠ Ù„Ù„Ø³Ø¤Ø§Ù„
  qTimeSpan.innerText = formatTime(perQuestionTimes[current]);
  // ØªÙØ¹ÙŠÙ„/ØªØ¹Ø·ÙŠÙ„ Ø£Ø²Ø±Ø§Ø±
  prevBtn.disabled = (current === 0);
  nextBtn.disabled = (current === totalQuestions - 1);
  // start per-question timer
  startPerQuestionTimer();
}

/* === Ø¥Ø¸Ù‡Ø§Ø± Ø§Ù„ØªØºØ°ÙŠØ© Ø§Ù„Ø±Ø§Ø¬Ø¹Ø© Ø¹Ù†Ø¯ Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø© Ø£Ùˆ Ø§Ù†ØªÙ‡Ø§Ø¡ Ø§Ù„ÙˆÙ‚Øª === */
function showFeedback(selectedValue){
  feedbackDiv.style.display = 'block';
  const correct = questions[current].answer;
  if(selectedValue === null){
    feedbackDiv.innerHTML = `<span class="wrong">âš ï¸ Ù„Ù… ØªØ®ØªØ± Ø¥Ø¬Ø§Ø¨Ø©. Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø© Ø§Ù„ØµØ­ÙŠØ­Ø©: ${correct}</span>`;
  } else if(selectedValue === correct){
    // Ø¬Ù…Ø¹ Ø§Ù„Ø®ÙŠØ§Ø±Ø§Øª Ø§Ù„Ø®Ø§Ø·Ø¦Ø© Ù„Ø¹Ø±Ø¶Ù‡Ø§
    const wrongs = questions[current].options.filter(o => o !== correct).join('ØŒ ');
    feedbackDiv.innerHTML = `<span class="correct">âœ… Ø¥Ø¬Ø§Ø¨Ø© ØµØ­ÙŠØ­Ø©!</span><br>Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø§Øª Ø§Ù„Ø®Ø§Ø·Ø¦Ø©: ${wrongs}`;
  } else {
    feedbackDiv.innerHTML = `<span class="wrong">âŒ Ø¥Ø¬Ø§Ø¨Ø© Ø®Ø§Ø·Ø¦Ø©!</span><br>Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø© Ø§Ù„ØµØ­ÙŠØ­Ø©: ${correct}`;
  }
}

/* === Ø£Ø²Ø±Ø§Ø± Ø§Ù„ØªÙ†Ù‚Ù„ === */
prevBtn.addEventListener('click', ()=>{
  if(current > 0) goToQuestion(current - 1);
});
nextBtn.addEventListener('click', ()=>{
  if(current < totalQuestions - 1) goToQuestion(current + 1);
  else submitAll();
});

/* Ø¹Ù„Ø§Ù…Ø© / Ù…Ø³Ø­ Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø© */
markBtn.addEventListener('click', ()=>{
  // Ø¥Ø°Ø§ ÙƒØ§Ù† Ù‡Ù†Ø§Ùƒ Ø¥Ø¬Ø§Ø¨Ø© Ù…Ø­ÙÙˆØ¸Ø© Ø§Ù…Ø³Ø­Ù‡Ø§ØŒ ÙˆØ¥Ø®ÙØ§Ø¡ Ø§Ù„ØªØºØ°ÙŠØ© Ø§Ù„Ø±Ø§Ø¬Ø¹Ø©
  if(userAnswers[current] !== null){
    userAnswers[current] = null;
    answeredFlags[current] = false;
    // Ø¥Ù„ØºØ§Ø¡ ØªØ­Ø¯ÙŠØ¯ Ø§Ù„Ø±Ø§Ø¯ÙŠÙˆ
    const checked = document.querySelector(`input[name="r${current}"]:checked`);
    if(checked) checked.checked = false;
    feedbackDiv.style.display = 'none';
    feedbackDiv.innerHTML = '';
  } else {
    // Ø¹Ù„Ø§Ù…Ø© (Ù„Ø§ ÙŠÙˆØ¬Ø¯ ÙˆØ¸ÙŠÙØ© Ø®Ø§ØµØ© Ø¨Ø®Ù„Ø§Ù Ø§Ù„ØªØ°ÙƒÙŠØ±) - Ù‡Ù†Ø§ Ù†Ø¶Ø¹ ØªØ£ÙƒÙŠØ¯ Ù…Ø±Ø¦ÙŠ
    feedbackDiv.style.display = 'block';
    feedbackDiv.innerHTML = `<span style="color:#065f46;font-weight:800;">ğŸ“Œ ÙŠÙ…ÙƒÙ†Ùƒ Ø§Ù„Ø¢Ù† Ø§Ø®ØªÙŠØ§Ø± Ø¥Ø¬Ø§Ø¨Ø© Ù„Ù‡Ø°Ø§ Ø§Ù„Ø³Ø¤Ø§Ù„</span>`;
    setTimeout(()=>{ feedbackDiv.style.display = 'none'; feedbackDiv.innerHTML=''; },1500);
  }
});

/* === Ø§Ù„Ø§Ù†ØªÙ‚Ø§Ù„ Ù„Ø³Ø¤Ø§Ù„ Ù…Ø­Ø¯Ø¯ === */
function goToQuestion(idx){
  // Ø­ÙØ¸ Ø­Ø§Ù„Ù‡ Ø§Ù„Ù…Ø¤Ù‚Øª Ø§Ù„Ø­Ø§Ù„ÙŠ (ØªÙ… Ø­ÙØ¸Ù‡ Ù…Ø³Ø¨Ù‚Ø§Ù‹ ÙÙŠ perQuestionTimes)
  // ØªØºÙŠÙŠØ± Ø§Ù„Ø¹Ø±Ø¶
  renderQuestion(idx);
}

/* === ØªØ³Ù„ÙŠÙ… Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø± ÙˆØ­Ø³Ø§Ø¨ Ø§Ù„Ù†ØªÙŠØ¬Ø© === */
function submitAll(){
  clearInterval(globalInterval);
  clearInterval(perInterval);
  // Ø­Ø³Ø§Ø¨ Ø§Ù„Ù†ØªÙŠØ¬Ø©
  let score = 0;
  for(let i=0;i<totalQuestions;i++){
    if(userAnswers[i] === questions[i].answer) score++;
  }
  // Ø§Ø¸Ù‡Ø§Ø± Ø§Ù„Ù†ØªÙŠØ¬Ø© Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠØ© ÙˆØªÙØ§ØµÙŠÙ„ Ù‚ØµÙŠØ±Ø©
  resultBox.style.display = 'block';
  resultBox.innerHTML = `ğŸ“ Ø§Ù†ØªÙ‡Ù‰ Ø§Ù„ÙˆÙ‚Øª Ø£Ùˆ ØªÙ… Ø§Ù„ØªØ³Ù„ÙŠÙ… â€” Ù†ØªÙŠØ¬ØªÙƒ: ${score} Ù…Ù† ${totalQuestions} (${Math.round((score/totalQuestions)*100)}%)<br><br>
  Ø§Ø¶ØºØ· Ø¹Ù„Ù‰ "Ø¹Ø±Ø¶ Ø§Ù„ØªÙØ§ØµÙŠÙ„" Ù„Ø¹Ø±Ø¶ ÙƒÙ„ Ø§Ù„Ø£Ø³Ø¦Ù„Ø© ÙˆØ¥Ø¬Ø§Ø¨Ø§ØªÙƒ.`;
  // Ø²Ø± Ù„Ø¹Ø±Ø¶ Ø§Ù„ØªÙØ§ØµÙŠÙ„
  const detailsBtn = document.createElement('button');
  detailsBtn.style.marginTop = '10px';
  detailsBtn.innerText = 'Ø¹Ø±Ø¶ Ø§Ù„ØªÙØ§ØµÙŠÙ„';
  detailsBtn.addEventListener('click', showFullReview);
  resultBox.appendChild(detailsBtn);

  // ØªØ¹Ø·ÙŠÙ„ Ø¹Ù†Ø§ØµØ± Ø§Ù„ØªØ­ÙƒÙ…
  prevBtn.disabled = true;
  nextBtn.disabled = true;
  markBtn.disabled = true;
  optionsDiv.querySelectorAll('input').forEach(i=> i.disabled = true);
}

/* === Ø¹Ø±Ø¶ Ù…Ø±Ø§Ø¬Ø¹Ø© ÙƒØ§Ù…Ù„Ø© Ù…Ø¹ Ø¥Ø¬Ø§Ø¨Ø© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… ÙˆØ§Ù„Ø¥Ø¬Ø§Ø¨Ø© Ø§Ù„ØµØ­ÙŠØ­Ø© === */
function showFullReview(){
  let html = `<div style="text-align:right;direction:rtl;">`;
  questions.forEach((qq, i) => {
    const your = userAnswers[i] ? userAnswers[i] : "Ù„Ù… ØªÙØ¬Ø¨";
    const ok = qq.answer;
    const correctMark = (your === ok) ? "âœ…" : "âŒ";
    html += `<div style="padding:10px;border-bottom:1px solid #eef2ff;">
      <div style="font-weight:800;">${i+1}. ${qq.q}</div>
      <div>Ø¥Ø¬Ø§Ø¨ØªÙƒ: <strong>${your}</strong> ${correctMark}</div>
      ${ your === ok ? `<div style="color:#064e3b;">Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø© ØµØ­ÙŠØ­Ø© â€” Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø§Øª Ø§Ù„Ø®Ø§Ø·Ø¦Ø©: ${qq.options.filter(o=>o!==ok).join('ØŒ ')}</div>` 
        : `<div style="color:#7f1d1d;">Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø© Ø§Ù„ØµØ­ÙŠØ­Ø©: <strong>${ok}</strong></div>` }
    </div>`;
  });
  html += `</div>`;
  resultBox.innerHTML = html;
}

/* === ØªÙ‡ÙŠØ¦Ø© Ø§Ù„Ø¨Ø¯Ø¡ === */
window.addEventListener('load', ()=>{
  renderQuestion(0);
});
</script>
</body>
</html>
